from langchain.document_loaders import TextLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter

path="../../data/C2/txt/蜂医.txt"
loader=TextLoader(file_path=path, encoding="utf-8")
docs = loader.load()


# text_splitter=RecursiveCharacterTextSplitter(
#     separators=["#","##","###","\n\n", "\n", "。", "，", " ", ""],
#     chunk_size=200,    # 每个块的目标大小为100个字符
#     chunk_overlap=10   # 每个块之间重叠10个字符，以缓解语义割裂
# )
text_splitter=RecursiveCharacterTextSplitter(
separators = [
    "\n\n", "\n", "###", "##", "#",
    "。", "！", "？", "；", "，", "、",
    "-", "*", "•", "▪",  # 列表符号
    "[", "]", "(", ")",  # 关键！修复参考文献碎片
    " ", "\u3000"         # 空格
],
        chunk_size=300,    # 每个块的目标大小为100个字符
    chunk_overlap=10   # 每个块之间重叠10个字符，以缓解语义割裂
)
chunks =text_splitter.split_documents(docs)
chunks = text_splitter.split_documents(docs)
print(f"文本被切分为 {len(chunks)} 个块。\n")
print("--- 块内容示例 ---")
for i, chunk in enumerate(chunks[:22]):

    """
    ============================================================
块 1 (长度: 72): "# 蜂医

游戏《三角洲行动》中的支援型干员

蜂医是2024年琳琅天上发行的《三角洲行动》中的支援型干员之一，在早期版本是唯一一个支援型干员。"
============================================================
块 2 (长度: 189): "蜂医在游戏中能够使用战术装备“激素枪”：远程治疗队友或'自我治疗'，还可以使用兵种道具“烟幕无人机”：释放长烟幕，和“蜂巢科技烟雾弹”：产生一团白色烟雾（使用激素枪对烟 雾射击换变成绿色烟雾，可起到治疗作用），干员特长为“高效救援”：救援倒地队友时速度更快，在全面战场模式中约1.4秒就能救起队友，且被救起的队友能恢复更多生命值。在烽火地带中，还能够移除 队友血量上限减少的负面效果"
============================================================
块 3 (长度: 12): "。 \[1-2]****"
============================================================
块 4 (长度: 189): "* 中文名

  罗伊•斯米

* 外文名

  Roy smee \[2]**

* 别    名

  罗伊、蜂医

* 性    别

  男

- 登场作品

  [三角洲行动](/item/%E4%B8%89%E8%A7%92%E6%B4%B2%E8%A1%8C%E5%8A%A8/63251542?fromModule=lemma_inlink)

- 生    日"
============================================================
块 5 (长度: 82): "- 生    日

  2008年2月23日 \[3]**

- 身    高

  176 cm \[3]**

- 体    重

  75 kg \[3]**"
============================================================
块 6 (长度: 153): "## 目录

1. 1[角色设定](#1)
2. 2[角色定位](#2)
3. 3[技能](#3)

1) ▪[战术装备 - 激素枪](#3-1)
2) ▪[战术道具 - 烟幕无人机](#3-2)
3) ▪[战术道具 - 蜂巢科技烟雾弹](#3-3)

1. ▪[干员特长 - 高效救援](#3-4)

#"
============================================================
块 7 (长度: 89): "#3-4)

## 角色设定

三角洲行动：医疗角色蜂医！让你不再为血量担忧

蜂医是游戏中的一名战地医生，拥有丰富的参军履历。

蜂医在干员档案中标明他有一个妻子和女儿。

#"
============================================================
块 8 (长度: 123): "## 角色定位

-蜂医在团队中主要承担支援和治疗的职责，是团队生存能力的重要保障。他能在激烈的战斗中为队友提供及时的治疗，确保队友保持良好的战斗状态，还能利用烟幕技能为团队创造有利的战术环境，如掩 护队友转移、推进或突袭等。

## 技能

##"
============================================================
块 9 (长度: 173): "## 技能

### 战术装备 - 激素枪

-可发射多目标追踪子弹，能同时锁定并缓慢治疗多名友方干员，治疗期间还能抑制队友的疼痛感等异常状态。

-开镜时，仅会锁定一个目标。

-全面战场中，开镜瞄准敌人可以扣除敌人20滴血

-长按按键可以对自己进行治疗，在全面战场中，可以恢复自身血量。烽火地带模式中，可以消除自身如骨折的负面效果。

##"
============================================================
块 10 (长度: 200): "### 战术道具 - 烟幕无人机

-能控制手势感应无人机向前飞行并喷射烟幕，形成一条长15米的烟雾长廊

-无人机飞行时，长按开火键引导无人机转向，可改变烟幕走向，用来分割战场、掩护队友撤退或进攻。

### 战术道具 - 蜂巢科技烟雾弹

-投掷后会在区域内产生一团白色烟雾，可作常规烟雾掩护使用。

-用激素枪向其烟雾射击，能将其染色为绿色的治疗烟雾，使在烟雾中的队友获得缓慢回血效果。

##"
============================================================
块 11 (长度: 125): "### 干员特长 - 高效救援

-救援倒地队友时速度更快。

-在全面战场模式中大概1.4秒就能救起队友，且被救起的队友不会存在扣血效果，能够恢复至满血。

-在烽火地带中，还能够移除队友血量上限减少的负面效果。

参考资料

* 1

  []("
============================================================
块 12 (长度: 171): "#sup-1)

  [《三角洲行动》PC/移动今日上线](/reference/65245483/533aYdO6cr3_z3kATKCLyvz3ZnmWYNWt7OfaWrBzzqIPmGapB4rjFJkjrtQw87hkBETK4sgwNIZMxr6sWxla)．腾讯游戏 \[引用日期2025-01-20]**
* 2

  []("
============================================================
块 13 (长度: 7): "#sup-2)"
============================================================
块 14 (长度: 199): "[《三角洲行动》干员档案-罗伊·斯米——代号：蜂医](/reference/65245483/533aYdO6cr3_z3kATPGIza6jYXqSN9ul6LOGBuNzzqIPmGapB5nyTcYw6ds2_P5rHUXIv5Utdt8Rk-fleC1Eu50Uc-xtRdNUgnm8E26tkOqJqZtux9xHoIldUaQemfHvtlK6hkzJhvWX5WjulmPM4Yew"
============================================================
块 15 (长度: 62): "julmPM4YewIHHGSYAdj4VcVsyHC6syegGFn0a7eVi3FOY)．哔哩哔哩．2024-03-16"
============================================================
块 16 (长度: 19): "\[引用日期2025-01-30]**"
============================================================
块 17 (长度: 3): "* 3"
============================================================
块 18 (长度: 3): "[]("
============================================================
块 19 (长度: 7): "#sup-3)"
============================================================
块 20 (长度: 11): "[三角洲干员背景小细节"
============================================================
块 21 (长度: 200): "，蜂医的女儿是谁？](/reference/65245483/533aYdO6cr3_z3kATKLdz_32YXnEZ9qsu-LUAeNzzqIPmGapB5nyTcYw6ds2_P5rHUXIv5Utdt8Rk-fleC1En6pmD7hvN9drgnm8E26tkOqJqZtux9xHoIldW64QmbKk5wavij7ZiPKBqGy_yHrOuty2czaCG-pe1ZQcAc-PD"
============================================================
块 22 (长度: 69): "e1ZQcAc-PDfpldFDVl0PqLgmyQLGbxP34imiXDI6z_zKMaYGUK5M)．哔哩哔哩．2025-01-26"
       """

    print("=" * 60)
    print(f'块 {i + 1} (长度: {len(chunk.page_content)}): "{chunk.page_content}"')